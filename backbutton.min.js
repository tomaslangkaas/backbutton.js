!function(e){function n(n){var t=(n=n||e[i][a]||"").indexOf("#");return t>-1?n.slice(t+1):""}function t(n,t){(t||e[i]).hash="#"+n}function o(e,t){var o,i=r.length;for(t=unescape(t||n()),o=0;o<i;o++)"function"==typeof r[o]&&r[o].call(u,t)}var r=[!1],i="location",a="href",c=n(),f=e.document,s="onhashchange"in e&&e.addEventListener,u=e.backbutton={version:"1.0.0",observe:function(e){var n=r.length;return r[n]=e,function(){r[n]=!1}},navigate:t,current:n,routes:function(e,n){var t=r[0];return void 0!==n&&!0!==n||setTimeout(o),r[0]=e&&"object"==typeof e?function(n){for(var t,o,r=0,i=e.length;r<i;r+=2)if(t=n.match(e[r])){if(!(o=e[r+1].apply(u,t.slice(1))))break;"string"==typeof o&&(n=o)}}:e,t},refresh:o};if(t(c),s)e.addEventListener("hashchange",o,!1);else{var l,d,v;(l=f.createElement("iframe")).src="javascript:0",l.style.display="none",l.tabIndex=-1,d=f.body.insertBefore(l,f.body.firstChild).contentWindow,(v=d.document).open(),v.close(),t(c,d[i]),setInterval(function(){var r=n(),f=n(d[i][a]);r!=c?(r!=f&&((v=d.document).open(),v.close(),t(r,d[i])),o(0,r),c=r):f!=c&&(e[i][a]=e[i][a].replace(/#.*/,"#")+f)},50)}}(window);
